<!DOCTYPE html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" >

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="Shortcut Icon" href="favicon3.ico" type="image/x-icon">
		<title>Beth's UNM Geography 485L Home Page</title>
		<link rel="stylesheet" type="text/css" href="css/foundation.css"/>
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/homepage.css" />

		<script src="js/vendor/modernizr.js"></script>
		<!--OpenLayers stuff-->

		<script type="text/javascript" src="http://openlayers.org/api/OpenLayers.js"></script>
		<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
		<!--		<script type="text/javascript">
		// define global variables
		var lon = -106.5;
		var lat = 36;
		var zoom = 3;
		var map;
		var layer, wms, sheltersKml, previewLayer, gphy, gmap, ghyb, gsat;
		var clingman, guyot, wash, roan, damascus;
		var service = "http://data1.commons.psu.edu/ArcGIS/rest/services/pasda/AppalachianTrail";

		// =============== Initialization function ===================
		function init() {
		//map = new OpenLayers.Map( 'map' );

		map = new OpenLayers.Map('map', {
		//projection : new OpenLayers.Projection("EPSG:102113"),
		projection : new OpenLayers.Projection('EPSG:3857'),
		displayProjection : new OpenLayers.Projection("EPSG:4326"),
		units : "m",
		numZoomLevels : 21,
		maxResolution : 156543.0339,
		maxExtent : new OpenLayers.Bounds(-9590000, 4000000, -7450000, 5900000)
		});

		//styles
		SheltersStyle = {
		pointRadius : 8,
		fillColor : "#000000",
		fillOpacity : .75,
		strokeOpacity : 1,
		strokeColor : "#000000"
		}, ClingmanStyle = {
		pointRadius : 10,
		fillColor : "#d8fe08",
		fillOpacity : .75,
		strokeOpacity : 1,
		strokeColor : "#d8fe08",
		};
		GuyotStyle = {
		pointRadius : 10,
		fillColor : "#08fef7",
		fillOpacity : .75,
		strokeOpacity : 1,
		strokeColor : "#08fef7",
		};
		WashingtonStyle = {
		pointRadius : 10,
		fillColor : "#0881fe",
		fillOpacity : .75,
		strokeOpacity : 1,
		strokeColor : "#0881fe"
		};
		RoanHighStyle = {
		pointRadius : 10,
		fillColor : "#fe08ce",
		fillOpacity : .75,
		strokeOpacity : 1,
		strokeColor : "#fe08ce"
		};
		DamascusStyle = {
		pointRadius : 10,
		fillColor : "#fe1708",
		fillOpacity : .75,
		strokeOpacity : 1,
		strokeColor : "#fe1708"
		};

		// =========== OSM Map ====================
		layer = new OpenLayers.Layer.OSM("Open Street Map");

		// =========== Google ====================

		gphy = new OpenLayers.Layer.Google("Google Physical", {
		type : google.maps.MapTypeId.TERRAIN
		});
		ghyb = new OpenLayers.Layer.Google("Google Hybrid", {
		type : google.maps.MapTypeId.HYBRID,
		numZoomLevels : 20
		});

		map.addLayers([layer, gphy, ghyb]);

		// =========== define ArcGIS layers ====
		/*previewLayer = new OpenLayers.Layer.ArcGIS93Rest("Appalachian Trail centerline", service + "/MapServer/export", {
		layers : "show:0",
		transparent : true
		}, {
		isBaseLayer : false,
		visibility : true
		});
		map.addLayer(previewLayer);*/

		//change arcgis layer to wms
		var wms = new OpenLayers.Layer.WMS("Appalachian Trail centerline", "http://data1.commons.psu.edu/arcgis/services/pasda/AppalachianTrail/MapServer/WMSServer?", {
		layers : "0",
		transparent : true
		}, {
		//opacity : 0.5,
		singleTile : true
		});
		map.addLayer(wms);

		// =============== KML (layer) ============
		/*sheltersKml = new OpenLayers.Layer.Vector("Trail Shelters", {
		//projection : map.displayProjection,
		style : SheltersStyle,
		visibility : true,
		strategies : [new OpenLayers.Strategy.Fixed()],
		protocol : new OpenLayers.Protocol.HTTP({
		url : "http://bethzilla.github.io/geog485/data/atc_shelter_120211.kml",
		format : new OpenLayers.Format.KML({
		extractAttributes : true
		})
		})
		});*/

		sheltersKml = new OpenLayers.Layer.Vector("KML", {
		strategies : [new OpenLayers.Strategy.Fixed()],
		protocol : new OpenLayers.Protocol.HTTP({
		url : "data/atc_shelter_120211.kml",
		format : new OpenLayers.Format.KML({
		extractStyles : true,
		extractAttributes : true,
		maxDepth : 2
		})
		})
		});
		//map.addLayer(sheltersKml);

		// =============== Point Features (Layers) ============
		clingman = new OpenLayers.Layer.Vector("Clingman's Dome");
		map.addLayer(clingman);
		guyot = new OpenLayers.Layer.Vector("Mount Guyot");
		map.addLayer(guyot);
		wash = new OpenLayers.Layer.Vector("Mount Washington");
		map.addLayer(wash);
		roan = new OpenLayers.Layer.Vector("Roan High Knob shelter");
		map.addLayer(roan);
		damascus = new OpenLayers.Layer.Vector("Damascus, VA");
		map.addLayer(damascus);

		var CoordClingman = new OpenLayers.Geometry.Point(-83.498496, 35.562872).transform(new OpenLayers.Projection(myProjection), map.getProjectionObject());
		var CoordGuyot = new OpenLayers.Geometry.Point(-71.533968, 44.168121).transform(new OpenLayers.Projection(myProjection), map.getProjectionObject());
		var CoordWash = new OpenLayers.Geometry.Point(-71.30367, 44.27067).transform(new OpenLayers.Projection(myProjection), map.getProjectionObject());
		var CoordRoan = new OpenLayers.Geometry.Point(-82.12222, 36.10506).transform(new OpenLayers.Projection(myProjection), map.getProjectionObject());
		var CoordDamascus = new OpenLayers.Geometry.Point(-81.786944, 36.633889).transform(new OpenLayers.Projection(myProjection), map.getProjectionObject());

		var PointClingman = new OpenLayers.Feature.Vector(CoordClingman, null, ClingmanStyle);
		var PointGuyot = new OpenLayers.Feature.Vector(CoordGuyot, null, GuyotStyle);
		var PointWash = new OpenLayers.Feature.Vector(CoordWash, null, WashingtonStyle);
		var PointRoan = new OpenLayers.Feature.Vector(CoordRoan, null, RoanHighStyle);
		var PointDamascus = new OpenLayers.Feature.Vector(CoordDamascus, null, DamascusStyle);

		Layers["clingman"].addFeatures([PointClingman]);
		Layers["guyot"].addFeatures([PointGuyot]);
		Layers["wash"].addFeatures([PointWash]);
		Layers["roan"].addFeatures([PointRoan]);
		Layers["damascus"].addFeatures([PointDamascus]);

		var initExtent = new OpenLayers.Bounds(-9706302.6788208, 4063330.4720154, -7333697.3211792, 5836669.5279846);
		map.zoomToExtent(initExtent, false);

		map.addControl(new OpenLayers.Control.LayerSwitcher());

		}

		// =============== End of Initialization Function ============

		</script>-->

		<script type="text/javascript">
			// define global variables
			// define global variables
			var lon = -76.8369140625;
			var lat = 39.9990234375;
			var zoom = 6;
			var myProjection = new OpenLayers.Projection("EPSG:4326")
			var map;
			var Layers = new Object();
			var bmngLayer, countiesLayer, indlandLayer, federallandsLayer;

			// =============== Initialization function ===================
			function init() {

				map = new OpenLayers.Map('map', {
					numZoomLevels : 21, // default=16
					units : "m"
				});

				// =========== USGS National Map WMS ======

				// from http://basemap.nationalmap.gov/ArcGIS/services/USGSImageryTopo/MapServer/WMSServer?request=GetCapabilities&service=WMS
				Layers.usImagery = new OpenLayers.Layer.WMS("US Topo Tile Service - USGS", "http://basemap.nationalmap.gov/arcgis/services/USGSTopo/MapServer/WmsServer?", {
					layers : "0",
					version : '1.3.0',
					transparent : 'TRUE',
					opacity : .50
				}, {
					isBaseLayer : true
				});
				map.addLayer(Layers.usImagery);

				//change arcgis layer to wms
				var wms = new OpenLayers.Layer.WMS("Appalachian Trail centerline", "http://data1.commons.psu.edu/arcgis/services/pasda/AppalachianTrail/MapServer/WMSServer?", {
					layers : "0",
					transparent : true
				}, {
					//opacity : 0.5,
					singleTile : true
				});
				map.addLayer(wms);

				// =========== Create and add a Vector layer to the map that that will contain the created features ====
				Layers.localFeatures = new OpenLayers.Layer.Vector('Local Features');
				map.addLayer(Layers.localFeatures);
				Layers.highestElevation = new OpenLayers.Layer.Vector('Highest Points of Elevation');
				map.addLayer(Layers.highestElevation);

				// =========== Create Some Styles ==============
				// Define some Styles
				SheltersStyle = {
					pointRadius : 6,
					fillColor : "#FF9900",
					fillOpacity : .30,
					strokeOpacity : 1,
					strokeColor : "#FF9900"
				};
				ClingmanStyle = {
					pointRadius : 14,
					fillColor : "#d8fe08",
					fillOpacity : .75,
					strokeOpacity : 1,
					strokeColor : "#d8fe08",
					label: "Clingman's Dome - 6,643 feet",
					labelAlign: "lb",
					labelXOffset: 18,
					labelYOffset: -10
				};
				GuyotStyle = {
					pointRadius : 14,
					fillColor : "#08fef7",
					fillOpacity : .75,
					strokeOpacity : 1,
					strokeColor : "#08fef7",
					label: "Mount Guyot - 6,621 feet",
					labelAlign: "lb",
					labelXOffset: 20,
					labelYOffset: -15
				};
				WashingtonStyle = {
					pointRadius : 14,
					fillColor : "#0881fe",
					fillOpacity : .75,
					strokeOpacity : 1,
					strokeColor : "#0881fe",
					label: "Mount Washington - 6,288 feet",
					labelAlign: "rb",
					labelXOffset: -20,
					labelYOffset: 15
				};
				RoanHighStyle = {
					pointRadius : 14,
					fillColor : "#fe08ce",
					fillOpacity : .75,
					strokeOpacity : 1,
					strokeColor : "#fe08ce",
					label: "Roan High Knob shelter - 6,285 feet",
					labelAlign: "lb",
					labelXOffset: 15,
					labelYOffset: -10
				};
				DamascusStyle = {
					pointRadius : 14,
					fillColor : "#fe1708",
					fillOpacity : .75,
					strokeOpacity : 1,
					strokeColor : "#fe1708",
					label: "Damascus, VA - Trail Town, USA",
					labelAlign: "rb",
					labelXOffset: -20
				};

				// =========== Create Some Geometries & Features ==============

				// Key Coordinates (Geometries)

				var CoordClingman = new OpenLayers.Geometry.Point(-83.498496, 35.562872);
				var CoordGuyot = new OpenLayers.Geometry.Point(-71.533968, 44.168121);
				var CoordWash = new OpenLayers.Geometry.Point(-71.30367, 44.27067);
				var CoordRoan = new OpenLayers.Geometry.Point(-82.12222, 36.10506);
				var CoordDamascus = new OpenLayers.Geometry.Point(-81.786944, 36.633889);

				// Corresponding Features

				var PointClingman = new OpenLayers.Feature.Vector(CoordClingman, null, ClingmanStyle);
				var PointGuyot = new OpenLayers.Feature.Vector(CoordGuyot, null, GuyotStyle);
				var PointWash = new OpenLayers.Feature.Vector(CoordWash, null, WashingtonStyle);
				var PointRoan = new OpenLayers.Feature.Vector(CoordRoan, null, RoanHighStyle);
				var PointDamascus = new OpenLayers.Feature.Vector(CoordDamascus, null, DamascusStyle);

				Layers["localFeatures"].addFeatures([PointDamascus]);
				Layers["highestElevation"].addFeatures([PointClingman, PointGuyot, PointWash, PointRoan]);
				

				// =========== KML Layer Addition ===============


				var kmllayer = new OpenLayers.Layer.Vector("Trail Shelters", {
					style: SheltersStyle,
					strategies : [new OpenLayers.Strategy.Fixed()],
					protocol : new OpenLayers.Protocol.HTTP({
						url : "data/atc_shelter_120211.kml",
						format : new OpenLayers.Format.KML({
							extractStyles : false,
							extractAttributes : true,
							maxDepth : 2
						})
					})
				});

				//Add a selector control to the kmllayer with popup functions
				var controls = {
					selector : new OpenLayers.Control.SelectFeature(kmllayer, {
						onSelect : createPopup,
						onUnselect : destroyPopup
					})
				};

				function createPopup(feature) {
					feature.popup = new OpenLayers.Popup.FramedCloud("pop", feature.geometry.getBounds().getCenterLonLat(), null, '<div class="markerContent">' + feature.attributes.name + '</div>', null, true, function() {
						controls['selector'].unselectAll();
					});
					//feature.popup.closeOnMove = true;
					map.addPopup(feature.popup);
				}

				function destroyPopup(feature) {
					feature.popup.destroy();
					feature.popup = null;
				}


				map.addControl(controls['selector']);
				controls['selector'].activate();

				map.addLayer(kmllayer);

				map.setCenter(new OpenLayers.LonLat(lon, lat), zoom);

				map.addControl(new OpenLayers.Control.LayerSwitcher());
				map.addControl(new OpenLayers.Control.MousePosition());

				

			}

			// =============== End of Initialization Function ============

		</script>

	</head>
	<body onload="init()">
		<!-- Nav Bar -->
		<div id="divInfo" style="position:absolute;top:10;left:60;background-color:white;border:4;border-style:solid;border-color:blue;padding:5;display:none;z-index:3000">
			info
		</div>

		<div class="row">
			<div class="large-12 columns">
				<div class="nav-bar right">
					<ul class="button-group radius round">
						<li>
							<a href="index.html" class="button">Home</a>
						</li>
						<li>
							<a href="milestones.html" class="button">Milestones</a>
						</li>
						<li>
							<a href="deepdives.html" class="button">Deep Dives</a>
						</li>
						<li>
							<a href="exams.html" class="button">Exams</a>
						</li>
					</ul>
				</div>
				<br />
				<h3>Geography 485L Milestone Page<!--<small>This is my blog. It's awesome.</small>--></h3>
				<hr />
			</div>
		</div>

		<!-- End Nav -->

		<!-- Main Page Content and Sidebar -->

		<div class="row">

			<!-- Main Blog Content -->
			<div class="large-12 columns">
				<h3 class="bsection">Week 11 <small> April 2, 2014</small></h3>

				<p>
					<b>Appalachian Trail</b><br>Data obtained from the <a href="http://www.appalachiantrail.org/about-the-trail/mapping-gis-data/appalachian-trail-gis-gps-data">Appalachian Trail Conservancy</a>.
				</p>

				<div id="map"></div>

			</div>
			<!-- End Main Content and Sidebar -->

			<!-- Footer -->

			<footer class="row">
				<div class="large-12 columns">
					<hr />
					<div class="row">
						<div class="large-6 columns">
							<p>
								Â© Beth Davis 2014.
							</p>
						</div>
						<div class="large-6 columns">
							<ul class="inline-list right">
								<li>
									<a href="index.html">Home</a>
								</li>
								<li>
									<a href="milestones.html">Milestones</a>
								</li>
								<li>
									<a href="deepdives.html">Deep Dives</a>
								</li>

								<li>
									<a href="exams.html" >Exams</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</footer>

			<script src="js/vendor/jquery.js"></script>
			<script src="js/foundation.min.js"></script>
			<script>
				$(document).foundation();
			</script>
	</body>
</html>
